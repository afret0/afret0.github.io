<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="en,zh-CN,default">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



















  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|KaiTi:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|STXingkai:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.4.2" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/imgs/favicon_32_32.ico?v=6.4.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/imgs/favicon_16_16.ico?v=6.4.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.4.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="1import this">
<meta name="keywords" content="python,reading_note">
<meta property="og:type" content="article">
<meta property="og:title" content="Effective Python 读书笔记">
<meta property="og:url" content="https://kong.afreto.tk/Effective-Python-读书笔记/index.html">
<meta property="og:site_name" content="Afreto&#39;s blog~">
<meta property="og:description" content="1import this">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-06-15T07:57:44.828Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Effective Python 读书笔记">
<meta name="twitter:description" content="1import this">






  <link rel="canonical" href="https://kong.afreto.tk/Effective-Python-读书笔记/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Effective Python 读书笔记 | Afreto's blog~</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Afreto's blog~</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">Archives</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">Tags</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kong.afreto.tk/Effective-Python-读书笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Afreto">
      <meta itemprop="description" content="江湖沒什麼好的, 也就酒還行~">
      <meta itemprop="image" content="/imgs/who.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Afreto's blog~">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Effective Python 读书笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-18 21:37:24" itemprop="dateCreated datePublished" datetime="2018-11-18T21:37:24+08:00">2018-11-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-06-15 15:57:44" itemprop="dateModified" datetime="2019-06-15T15:57:44+08:00">2019-06-15</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> this</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="用-Python-的方式思考"><a href="#用-Python-的方式思考" class="headerlink" title="用 Python 的方式思考"></a>用 Python 的方式思考</h1><h2 id="bytes-str-和-unicode"><a href="#bytes-str-和-unicode" class="headerlink" title="bytes str 和 unicode"></a>bytes str 和 unicode</h2><p>接受 str 或 bytes 返回 str 的方法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_str</span><span class="params">(bytes_or_str)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(bytes_or_str, bytes):</span><br><span class="line">        value = bytes_or_str.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        value = bytes_or_str</span><br><span class="line">    <span class="keyword">return</span> value</span><br></pre></td></tr></table></figure></p>
<p>接受 str 或 bytes 返回 bytes 的方法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_bytes</span><span class="params">(bytes_or_str)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(bytes_or_str, str):</span><br><span class="line">        value = bytes_or_str.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        value = bytes_or_str</span><br><span class="line">    <span class="keyword">return</span> value</span><br></pre></td></tr></table></figure></p>
<h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>如果从序列的开头获取切片,那就不要在 start 那里写上 0 ,而是应该把它留空,这样代码看起来会清爽一些.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> s[:<span class="number">5</span>] == s[<span class="number">0</span>:<span class="number">5</span>]</span><br></pre></td></tr></table></figure></p>
<p>如果切片一直要取到列表末尾,那就应该把 end 留空,因为即使写了,也是多余.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> s[<span class="number">5</span>:] == s[<span class="number">5</span>:len(s)]</span><br></pre></td></tr></table></figure></p>
<p>切割列表时,如果指定了 stride,那么代码可能会变得相当费解.我们呢不应该把 stride 与 start 和 end 写在一起.如果非要用,那就尽量采用正值.同时省略 start 和 end 索引.如果一定要配合 start 或 end 索引来使用 stride,请考虑步进式切片,把切割结果赋给某个变量,然后二次切片.</p>
<h2 id="尽量用-enumerate-取代-range"><a href="#尽量用-enumerate-取代-range" class="headerlink" title="尽量用 enumerate 取代 range"></a>尽量用 <code>enumerate</code> 取代 <code>range</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, flavor <span class="keyword">in</span> enumerate(flavor_list, <span class="number">1</span>):</span><br><span class="line">    print(<span class="string">'&#123;&#125; : &#123;&#125;'</span>.format(i, flavor))</span><br></pre></td></tr></table></figure>
<h2 id="用-zip-遍历两个列表"><a href="#用-zip-遍历两个列表" class="headerlink" title="用 zip() 遍历两个列表"></a>用 <code>zip()</code> 遍历两个列表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">names = [<span class="string">'tom'</span>, <span class="string">'anny'</span>, <span class="string">'jake'</span>]</span><br><span class="line">letters = [len(n) <span class="keyword">for</span> n <span class="keyword">in</span> names]</span><br><span class="line"><span class="keyword">for</span> name, count <span class="keyword">in</span> zip(names, letters):</span><br><span class="line">    print(<span class="string">'&#123;&#125; : &#123;&#125;'</span>.format(name, count))</span><br></pre></td></tr></table></figure>
<p><strong>如果输入的迭代器长度不同, 受封装的那些迭代器中,只要有一个耗尽了,<code>zip</code> 就不再产生新的元组了</strong></p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="尽量用异常来表示特殊情况-而不要返回-None"><a href="#尽量用异常来表示特殊情况-而不要返回-None" class="headerlink" title="尽量用异常来表示特殊情况,而不要返回 None"></a>尽量用异常来表示特殊情况,而不要返回 <code>None</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> a / b</span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">'Invlid inputs'</span>) <span class="keyword">from</span> e</span><br></pre></td></tr></table></figure>
<h1 id="类与继承"><a href="#类与继承" class="headerlink" title="类与继承"></a>类与继承</h1><h2 id="尽量用辅助类来维护程序的状态-而不要用字典和元组"><a href="#尽量用辅助类来维护程序的状态-而不要用字典和元组" class="headerlink" title="尽量用辅助类来维护程序的状态, 而不要用字典和元组"></a>尽量用辅助类来维护程序的状态, 而不要用字典和元组</h2><p>很容易就能用 Python 内置的字典与元组类型构建出分层的数据结构, 从而保存程序的内部状态. 但是, 当嵌套多于一层的时候, 就应该避免这种做法(<strong>不要使用包含字典的字典</strong>), 这种多层嵌套的代码, 其他人很难看懂, 而且自己维护起来也很麻烦.</p>
<p>用来保存程序状态的数据结构一旦变得过于复杂, 就应该将其拆解为类, 以便提供更为明确的接口, 也能够在接口与具体实现之间创建抽象层.  </p>
<h3 id="把嵌套结构重构为类"><a href="#把嵌套结构重构为类" class="headerlink" title="把嵌套结构重构为类"></a>把嵌套结构重构为类</h3><p><code>collections</code> 模块着的 <code>namedtuple</code>(<strong>具名元组</strong>)类型非常适合这种需求, 使用它很容易定义出精简而又不可变的数据类.<br><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line">Grade = collections.namedtuple(<span class="string">'Grade'</span>, (<span class="string">'score'</span>, <span class="string">'weight'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 科目类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._grades = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">report_grade</span><span class="params">(self, score, weight)</span>:</span></span><br><span class="line">        self._grades.append(Grade(score, weight))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">average_grade</span><span class="params">(self)</span>:</span></span><br><span class="line">        total, total_weight = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> grade <span class="keyword">in</span> self._grades:</span><br><span class="line">            total += grade.score * grade.weight</span><br><span class="line">            total_weight += grade.weight</span><br><span class="line">        <span class="keyword">return</span> total / total_weight</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 学生类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._subjects = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subject</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> self._subjects:</span><br><span class="line">            self._subjects[name] = Subject()</span><br><span class="line">        <span class="keyword">return</span> self._subjects[name]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">average_grade</span><span class="params">(self)</span>:</span></span><br><span class="line">        total, count = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> subject <span class="keyword">in</span> self._subjects.values():</span><br><span class="line">            total += subject.average_grade()</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> total / count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 考试成绩容器类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gradebook</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._students = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">student</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> self._students:</span><br><span class="line">            self._students[name] = Student()</span><br><span class="line">        <span class="keyword">return</span> self._students[name]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    book = Gradebook()</span><br><span class="line">    albert = book.student(<span class="string">'Albert Einstein'</span>)</span><br><span class="line">    math = albert.subject(<span class="string">'Math'</span>)</span><br><span class="line">    math.report_grade(<span class="number">80</span>, <span class="number">0.10</span>)</span><br><span class="line">    print(albert.average_grade())</span><br></pre></td></tr></table></figure></p>
<p>_要点_</p>
<ul>
<li>不要使用包含其它字典的字典, 也不要使用过长的元组</li>
<li>如果容器中包含间的而又不可变的数据, 那么可以先使用 <code>nametuple</code> 来表示, 再修改为完整的类</li>
<li>保存内部状态的字典如果变得比较复杂, 那就应该把这些代码拆解为多个辅助类.<h2 id="只在使用-Mix-in-组件制作工具类时进行多重继承"><a href="#只在使用-Mix-in-组件制作工具类时进行多重继承" class="headerlink" title="只在使用 Mix-in 组件制作工具类时进行多重继承"></a>只在使用 <code>Mix-in</code> 组件制作工具类时进行多重继承</h2><blockquote>
<p>待续</p>
</blockquote>
<h2 id="多用-public-属性-少用-private-属性"><a href="#多用-public-属性-少用-private-属性" class="headerlink" title="多用 public 属性, 少用 private 属性"></a>多用 public 属性, 少用 private 属性</h2><h1 id="元类及属性"><a href="#元类及属性" class="headerlink" title="元类及属性"></a>元类及属性</h1><h2 id="用纯属性取代-get-和-set-方法"><a href="#用纯属性取代-get-和-set-方法" class="headerlink" title="用纯属性取代 get 和 set 方法"></a>用纯属性取代 <code>get</code> 和 <code>set</code> 方法</h2>使用 <code>@property</code> 装饰器在设置属性的时候实现特殊行为.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Resistor</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, ohms)</span>:</span></span><br><span class="line">        self.ohms = ohms</span><br><span class="line">        self.voltage = <span class="number">0</span></span><br><span class="line">        self.current = <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>下面这个子类继承自 Resistor, 它在给 voltage(_电压<em>)属性赋值的时候,还会同时修改 current(</em>电流_)属性.</p>
<blockquote>
<p><code>setter</code> 和 <code>getter</code> 方法的名称必须与相关属性相符.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VoltageResistance</span><span class="params">(Resistor)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, ohms)</span>:</span></span><br><span class="line">        super().__init__(ohms)</span><br><span class="line">        self._voltage = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">voltage</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._voltage</span><br><span class="line"></span><br><span class="line"><span class="meta">    @voltage.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">voltage</span><span class="params">(self, voltage)</span>:</span></span><br><span class="line">        self._voltage = voltage</span><br><span class="line">        self.current = self._voltage / self.ohms</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    r2 = VoltageResistance(<span class="number">3</span>)</span><br><span class="line">    print(<span class="string">'Before: &#123;&#125; amps'</span>.format(r2.current))</span><br><span class="line">    r2.voltage = <span class="number">10</span></span><br><span class="line">    print(<span class="string">'after: &#123;&#125; amps'</span>.format(r2.curren</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><code>&gt;&gt;&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Before: 0 amps</span><br><span class="line">after: 3.3333333333333335 amps</span><br></pre></td></tr></table></figure></p>
<h2 id="用-property-来代替属性重构"><a href="#用-property-来代替属性重构" class="headerlink" title="用 @property 来代替属性重构"></a>用 <code>@property</code> 来代替属性重构</h2><p>带有配额的漏桶.<br><em>代码略</em></p>
<blockquote>
<p>漏桶算法是一种具备传输, 调度和统计等用途的算法. 它把容器比作底部有漏洞的桶(<em>leakybucket</em>), 把配额(<em>quota</em>)比作桶底漏出的水.</p>
</blockquote>
<h2 id="用描述符来改写需要复用的-property-方法"><a href="#用描述符来改写需要复用的-property-方法" class="headerlink" title="用描述符来改写需要复用的 @property 方法"></a>用描述符来改写需要复用的 <code>@property</code> 方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grade</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment">#...</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Exam</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment">#class attributes</span></span><br><span class="line">    math_grade = Grade()</span><br><span class="line">    writing_grade = Grade()</span><br><span class="line">    science_grade = Grade()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    exam = Exam()</span><br><span class="line">    exam.writing_grade = <span class="number">40</span></span><br></pre></td></tr></table></figure>
<p>为属性赋值时, Python 会将其转译:<br><br><code>Exam.__dict__[&#39;writing_grade&#39;].__set__(exam, 40)</code><br><br>在获取属性时<br><code>print(exam.writing_grade)</code><br>Python 也会将其转译<br><code>print(Exam.__dict__[&#39;writing_grade&#39;].__get__(exam, Exam))</code></p>
<h2 id="用-getattr-getattribute-和-setattr-实现按需生成的属性"><a href="#用-getattr-getattribute-和-setattr-实现按需生成的属性" class="headerlink" title="用 __getattr__ __getattribute__ 和 __setattr__ 实现按需生成的属性"></a>用 <code>__getattr__ __getattribute__ 和 __setattr__</code> 实现按需生成的属性</h2><h3 id="getattr"><a href="#getattr" class="headerlink" title="__getattr__"></a><code>__getattr__</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazyDB</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.exists = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        value = <span class="string">'value for &#123;&#125;'</span>.format(name)</span><br><span class="line">        setattr(self, name, value)</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    data = LazyDB()</span><br><span class="line">    print(<span class="string">'before: &#123;&#125;'</span>.format(data.__dict__))</span><br><span class="line">    print(<span class="string">'foo: &#123;&#125;'</span>.format(data.foo))</span><br><span class="line">    print(<span class="string">'after: &#123;&#125;'</span>.format(data.__dict__))</span><br></pre></td></tr></table></figure>
<p><code>&gt;&gt;&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">before: &#123;&apos;exists&apos;: 5&#125;</span><br><span class="line">foo: value for foo</span><br><span class="line">after: &#123;&apos;exists&apos;: 5, &apos;foo&apos;: &apos;value for foo&apos;&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后给 LazyDB 添加记录功能, 把程序对 <code>__getattr__</code> 的调用行为记录下来. 为了避免无限递归, 需要在 LoggingLazyDB 子类里面通过 <code>super().__getattr__()</code> 来获取真正的属性值.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoggingLazyDB</span><span class="params">(LazyDB)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        print(<span class="string">'Called __getattr__&#123;&#125;'</span>.format(name))</span><br><span class="line">        <span class="keyword">return</span> super().__getattr__(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    data = LoggingLazyDB()</span><br><span class="line">    print(<span class="string">'exists:  &#123;&#125;'</span>.format(data.exists))</span><br><span class="line">    print(<span class="string">'foo: &#123;&#125;'</span>.format(data.foo))</span><br><span class="line">    print(<span class="string">'foo: &#123;&#125;'</span>.format(data.foo))</span><br></pre></td></tr></table></figure></p>
<p><code>&gt;&gt;&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exists:  5</span><br><span class="line">Called __getattr__foo</span><br><span class="line">foo: value for foo</span><br><span class="line">foo: value for foo</span><br></pre></td></tr></table></figure></p>
<p>因为 exists 属性本身就在实例字典里面, 所以访问它的时候不会触发 <code>__getattr__</code>. foo 属性初始时并不在实例字典里, 所以初次访问的时候会触发 <code>__getattr__</code>. <code>__getattr__</code> 调用 <code>setattr</code> 方法, 把 foo 放在实例字典中, 所以第二次访问 foo 的时候不会触发 <code>__getattr__</code>.</p>
<h3 id="getattribute"><a href="#getattribute" class="headerlink" title="__getattribute__"></a><code>__getattribute__</code></h3><p>程序每次访问对象的属性时, Python 会调用这个特殊方法, 即使属性字典里面已经有了该属性, 也依然会触发 <code>__getattribute__</code> 方法.<br><br>ValidatingDB 会在 <code>__getattribute__</code> 方法里面记录每次调用的时间.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValidatingDB</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.exists = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattribute__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        print(<span class="string">'Called __getattrbute__ &#123;&#125;'</span>.format(name))</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> super().__getattribute__(name)</span><br><span class="line">        <span class="keyword">except</span> AttributeError:</span><br><span class="line">            value = <span class="string">'value for &#123;&#125;'</span>.format(name)</span><br><span class="line">            setattr(self, name, value)</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    data = ValidatingDB()</span><br><span class="line">    print(<span class="string">'exists:  &#123;&#125;'</span>.format(data.exists))</span><br><span class="line">    print(<span class="string">'foo: &#123;&#125;'</span>.format(data.foo))</span><br><span class="line">    print(<span class="string">'foo: &#123;&#125;'</span>.format(data.foo))</span><br></pre></td></tr></table></figure></p>
<p><code>&gt;&gt;&gt;</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Called __getattrbute__ exists</span><br><span class="line">exists:  <span class="number">5</span></span><br><span class="line">Called __getattrbute__ foo</span><br><span class="line">foo: value <span class="keyword">for</span> foo</span><br><span class="line">Called __getattrbute__ foo</span><br><span class="line">foo: value <span class="keyword">for</span> foo</span><br></pre></td></tr></table></figure></p>
<p>按照 Python 处理缺失属性的标准流程, 如果程序动态地访问了一个不应该有的属性, 可以在 <code>__getattr__</code> 和 <code>__getattrbute__</code> 里面抛出 AttributeError 异常.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MissingPropertyDB</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> name == <span class="string">'bad_name'</span>:</span><br><span class="line">            <span class="keyword">raise</span> AttributeError(<span class="string">'&#123;&#125; is missing'</span>.format(name))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    data = MissingPropertyDB()</span><br><span class="line">    data.bad_name</span><br></pre></td></tr></table></figure></p>
<p><code>&gt;&gt;&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;C:/Users/wter/OneDrive/pythonpj/half_a_wheel/half/test.py&quot;, line 54, in &lt;module&gt;</span><br><span class="line">    data.bad_name</span><br><span class="line">  File &quot;C:/Users/wter/OneDrive/pythonpj/half_a_wheel/half/test.py&quot;, line 49, in __getattr__</span><br><span class="line">    raise AttributeError(&apos;&#123;&#125; is missing&apos;.format(name))</span><br><span class="line">AttributeError: bad_name is missing</span><br></pre></td></tr></table></figure></p>
<p>实现通用的功能时, 会在 Python 中使用内置的 hasattr 函数来判断对象是否已经拥有了相关的属性, 并用内置的 getattr 函数来获取属性值. 这些函数会在实例字典中搜索待查询的属性,然后再调用 <code>__getattr__</code>.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data = LoggingLazyDB()</span><br><span class="line">print(<span class="string">'before:  &#123;&#125;'</span>.format(data.__dict__))</span><br><span class="line">print(<span class="string">'foo exists:  &#123;&#125;'</span>.format(hasattr(data, <span class="string">'foo'</span>)))</span><br><span class="line">print(<span class="string">'after:   &#123;&#125;'</span>.format(data.__dict__))</span><br><span class="line">print(<span class="string">'foo exists:  &#123;&#125;'</span>.format(hasattr(data, <span class="string">'foo'</span>)))</span><br></pre></td></tr></table></figure></p>
<p><code>&gt;&gt;&gt;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">before:  &#123;&apos;exists&apos;: 5&#125;</span><br><span class="line">Called __getattr__foo</span><br><span class="line">foo exists:  True</span><br><span class="line">after:   &#123;&apos;exists&apos;: 5, &apos;foo&apos;: &apos;value for foo&apos;&#125;</span><br><span class="line">foo exists:  True</span><br></pre></td></tr></table></figure></p>
<h2 id="用元类验证子类"><a href="#用元类验证子类" class="headerlink" title="用元类验证子类"></a>用元类验证子类</h2><p><em>内容赞略</em></p>
<h2 id="用元类来注册子类"><a href="#用元类来注册子类" class="headerlink" title="用元类来注册子类"></a>用元类来注册子类</h2><p><em>内容赞略</em></p>
<h2 id="用元类来注解类的属性"><a href="#用元类来注解类的属性" class="headerlink" title="用元类来注解类的属性"></a>用元类来注解类的属性</h2><p><em>内容赞略</em></p>
<h1 id="并发和并行"><a href="#并发和并行" class="headerlink" title="并发和并行"></a>并发和并行</h1><h2 id="用-subprocess-模块来管理子进程"><a href="#用-subprocess-模块来管理子进程" class="headerlink" title="用 subprocess 模块来管理子进程"></a>用 <code>subprocess</code> 模块来管理子进程</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_sleep</span><span class="params">(period)</span>:</span></span><br><span class="line">    proc = subprocess.Popen([<span class="string">'sleep'</span>, str(period)])</span><br><span class="line">    <span class="keyword">return</span> proc</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">procs = []</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">20</span>):</span><br><span class="line">    proc = run_sleep(<span class="number">0.1</span>)</span><br><span class="line">    procs.append(proc)</span><br><span class="line"><span class="keyword">for</span> proc <span class="keyword">in</span> procs:</span><br><span class="line">    proc.communicate()</span><br><span class="line">end = time.time()</span><br><span class="line">print(<span class="string">'Finished in &#123;&#125; s'</span>.format(end - start))</span><br></pre></td></tr></table></figure>
<h2 id="用协程来并发的运行多个函数"><a href="#用协程来并发的运行多个函数" class="headerlink" title="用协程来并发的运行多个函数"></a>用协程来并发的运行多个函数</h2><p>_暂略_</p>
<h1 id="内置模块"><a href="#内置模块" class="headerlink" title="内置模块"></a>内置模块</h1><h2 id="用-function-wraps-定义函数修饰器"><a href="#用-function-wraps-定义函数修饰器" class="headerlink" title="用 function.wraps 定义函数修饰器"></a>用 <code>function.wraps</code> 定义函数修饰器</h2><h2 id="用-datetima-模块来处理本地时间"><a href="#用-datetima-模块来处理本地时间" class="headerlink" title="用 datetima 模块来处理本地时间"></a>用 <code>datetima</code> 模块来处理本地时间</h2><h3 id="time-模块"><a href="#time-模块" class="headerlink" title="time 模块"></a>time 模块</h3><h3 id="datetime-模块"><a href="#datetime-模块" class="headerlink" title="datetime 模块"></a>datetime 模块</h3><h2 id="使用内置算法与数据结构"><a href="#使用内置算法与数据结构" class="headerlink" title="使用内置算法与数据结构"></a>使用内置算法与数据结构</h2><h3 id="双向队列"><a href="#双向队列" class="headerlink" title="双向队列"></a>双向队列</h3><p><code>collection</code> 模块中的 <code>deque</code> 类, 是一种双向队列. 从头部或者尾部插入或移除一个元素, 之需要消耗常数级别的时间.非常适合用来表示先进先出的队列.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fifo = deque()</span><br><span class="line">fifo.append(<span class="number">1</span>)</span><br><span class="line">x = fifo.popleft()</span><br></pre></td></tr></table></figure></p>
<p>list 从尾部插入或者移除元素,  需要O(1), 但是从头部插入或移除元素会消耗线性级别的时间.</p>
<h3 id="有序字典"><a href="#有序字典" class="headerlink" title="有序字典"></a>有序字典</h3><p><code>collection</code> 模块中的 <code>OrderedDict</code> 类, 能够按照键的插入顺序, 来保留键值对在字典中的次序.</p>
<h3 id="带有默认值的字典"><a href="#带有默认值的字典" class="headerlink" title="带有默认值的字典"></a>带有默认值的字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stats = defaultdict(int)</span><br><span class="line">stats[my_counte<span class="string">r'] += 1</span></span><br></pre></td></tr></table></figure>
<h3 id="堆队列"><a href="#堆队列" class="headerlink" title="堆队列"></a>堆队列</h3><p><code>heapd</code> 模块提供了 <code>heappush</code> <code>heappop</code> 和 <code>nsmallest</code> 等函数, 能在标准的list类型中创建堆结构.</p>
<h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><p>list 使用 index 方法来搜索某个元素, 所耗的时间会与列表的长度呈线性比例.<br><code>bisect</code> 模块中的 <code>bisect_left</code> 等函数, 提供了高效的二分析半搜索算法, 可以在一系列排好顺序的元素之中搜寻某个值.</p>
<h3 id="迭代器有关的工具"><a href="#迭代器有关的工具" class="headerlink" title="迭代器有关的工具"></a>迭代器有关的工具</h3><h2 id="在重视精确度的场景-应该使用-decimal"><a href="#在重视精确度的场景-应该使用-decimal" class="headerlink" title="在重视精确度的场景, 应该使用 decimal"></a>在重视精确度的场景, 应该使用 <code>decimal</code></h2><h1 id="协作开发"><a href="#协作开发" class="headerlink" title="协作开发"></a>协作开发</h1><h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><p>使用大写的变量名称表示常量<br><br>习惯用下划线表示无用的变量<br></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"><i class="fa fa-tag"></i>
 python</a>
          
            <a href="/tags/reading-note/" rel="tag"><i class="fa fa-tag"></i>
 reading_note</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/图解算法读书笔记/" rel="next" title="图解算法读书笔记">
                <i class="fa fa-chevron-left"></i> 图解算法读书笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Http-权威指南读书笔记/" rel="prev" title="Http 权威指南读书笔记">
                Http 权威指南读书笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/imgs/who.png" alt="Afreto">
            
              <p class="site-author-name" itemprop="name">Afreto</p>
              <p class="site-description motion-element" itemprop="description">江湖沒什麼好的, 也就酒還行~</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">37</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="mailto:kongandmarx@163.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#用-Python-的方式思考"><span class="nav-text">用 Python 的方式思考</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#bytes-str-和-unicode"><span class="nav-text">bytes str 和 unicode</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切片"><span class="nav-text">切片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#尽量用-enumerate-取代-range"><span class="nav-text">尽量用 enumerate 取代 range</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-zip-遍历两个列表"><span class="nav-text">用 zip() 遍历两个列表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#函数"><span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#尽量用异常来表示特殊情况-而不要返回-None"><span class="nav-text">尽量用异常来表示特殊情况,而不要返回 None</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类与继承"><span class="nav-text">类与继承</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#尽量用辅助类来维护程序的状态-而不要用字典和元组"><span class="nav-text">尽量用辅助类来维护程序的状态, 而不要用字典和元组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#把嵌套结构重构为类"><span class="nav-text">把嵌套结构重构为类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#只在使用-Mix-in-组件制作工具类时进行多重继承"><span class="nav-text">只在使用 Mix-in 组件制作工具类时进行多重继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多用-public-属性-少用-private-属性"><span class="nav-text">多用 public 属性, 少用 private 属性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#元类及属性"><span class="nav-text">元类及属性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用纯属性取代-get-和-set-方法"><span class="nav-text">用纯属性取代 get 和 set 方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-property-来代替属性重构"><span class="nav-text">用 @property 来代替属性重构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用描述符来改写需要复用的-property-方法"><span class="nav-text">用描述符来改写需要复用的 @property 方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-getattr-getattribute-和-setattr-实现按需生成的属性"><span class="nav-text">用 __getattr__ __getattribute__ 和 __setattr__ 实现按需生成的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#getattr"><span class="nav-text">__getattr__</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getattribute"><span class="nav-text">__getattribute__</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用元类验证子类"><span class="nav-text">用元类验证子类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用元类来注册子类"><span class="nav-text">用元类来注册子类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用元类来注解类的属性"><span class="nav-text">用元类来注解类的属性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#并发和并行"><span class="nav-text">并发和并行</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用-subprocess-模块来管理子进程"><span class="nav-text">用 subprocess 模块来管理子进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用协程来并发的运行多个函数"><span class="nav-text">用协程来并发的运行多个函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#内置模块"><span class="nav-text">内置模块</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用-function-wraps-定义函数修饰器"><span class="nav-text">用 function.wraps 定义函数修饰器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-datetima-模块来处理本地时间"><span class="nav-text">用 datetima 模块来处理本地时间</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#time-模块"><span class="nav-text">time 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#datetime-模块"><span class="nav-text">datetime 模块</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用内置算法与数据结构"><span class="nav-text">使用内置算法与数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#双向队列"><span class="nav-text">双向队列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有序字典"><span class="nav-text">有序字典</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#带有默认值的字典"><span class="nav-text">带有默认值的字典</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#堆队列"><span class="nav-text">堆队列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二分查找"><span class="nav-text">二分查找</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#迭代器有关的工具"><span class="nav-text">迭代器有关的工具</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#在重视精确度的场景-应该使用-decimal"><span class="nav-text">在重视精确度的场景, 应该使用 decimal</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#协作开发"><span class="nav-text">协作开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文档"><span class="nav-text">文档</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试"><span class="nav-text">测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tips"><span class="nav-text">Tips</span></a></li></ol></div>
            
          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Afreto</span>

  

  
</div>











        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


















  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.2"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

    <script type="text/javascript">
  /* 鼠标特效 */
//   var a_idx = 0;
//   jQuery(document).ready(function($) {
//      $("body").click(function(e) {
//          var a = new Array("蒸羊羔", "蒸熊掌", "蒸鹿尾儿", "烧花鸭", "烧雏鸡儿", "烧子鹅", "卤煮咸鸭" ,"酱鸡", "腊肉", "松花", "小肚儿", "晾肉","香肠","尖氽活鲤鱼","板鸭","筒子鸡");
//          var $i = $("<span/>").text(a[a_idx]);
//          a_idx = (a_idx + 1) % a.length;
//          var x = e.pageX,
//          y = e.pageY;
//          $i.css({
//              "z-index": 999999999999999999999999999999999999999999999999999999999999999999999,
//              "top": y - 20,
//              "left": x,
//              "position": "absolute",
//              "font-weight": "bold",
//              "color": "#ff6651"
//          });
//          $("body").append($i);
//          $i.animate({
//              "top": y - 180,
//              "opacity": 0
//          },
//          1500,
//          function() {
//              $i.remove();
//          });
//      });
//   });
//       </script>
//       
// </body>
// </html>
